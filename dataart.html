<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <meta name="description" content="art" />
    <meta name="description" content="scatterplot" />
    <meta name="description" content="constellation" />
    <meta name="author" content="Sameshnee Moodley" />
    <script src="https://d3js.org/d3.v4.js"></script>
    <title>Data Art Section</title>
    <link rel="stylesheet" href="css/dataart.css" />
    <script
      src="https://kit.fontawesome.com/2701e034ac.js"
      crossorigin="anonymous"
    ></script>
    <script src="https://code.jquery.com/jquery-3.4.1.js"></script>
    <script>
      $(document).ready(function () {
        $("#icon").click(function () {
          $("ul").toggleClass("show");
        });
      });
    </script>
  </head>
  <body>
    <nav>
      <label class="logo"> The Unofficial</label>
      <ul>
        <li><a href="index.html">-Home</a></li>
        <li><a href="blog.html">-Blog Space</a></li>
        <li><a href="designsection.html">-Design Sector</a></li>
        <li><a href="dataviz.html">-Data Visualization</a></li>
        <li><a class="active" href="dataart.html">-Data Art Sector</a></li>
        <li><a href="ufo.html">-Kiss My Asteroid</a></li>
      </ul>
      <label id="icon">
        <i class="fa-solid fa-bars"></i>
      </label>
    </nav>
    <section></section>
    <h2 class="heading">CAD: Close Approach Data for Asteroids and Comets</h2>
    <h2>
      <p class="heading">
        CAD stands for "Close Approach Data" for all asteroids and comets near
        Earth, in other words, orbital data. In terms of 'close', asteroids and
        comets can be extremely far in human terms, sometimes millions or even
        tens of millions of kilometers away.
      </p>
    </h2>

    <!--reload button-->
    <h3 class="heading"><button>Change Constellation</button></h3>
    <!--end of button-->

    <div id="my_dataviz"></div>
    <script class="DOTS">
      data =
        '{"signature":{"source":"NASA/JPL SBDB Close Approach Data API","version":"1.5"},"count":29,"fields":["des","orbit_id","jd","cd","dist","dist_min","dist_max","v_rel","v_inf","t_sigma_f","h"],"data":[["2023 UO7","1","2460244.883146617","2023-Oct-27 09:12","0.00276032140457702","0.00275285019882264","0.00276779254014574","13.8135034905443","13.7434464880323","00:11","28.315"],["2023 UK3","3","2460241.324346017","2023-Oct-23 19:47","0.00557926638330971","0.00557107315340071","0.00558745931538443","8.66654382442996","8.61126272802984","< 00:01","29.16"],["2023 UZ3","4","2460250.480261347","2023-Nov-01 23:32","0.00689970516045109","0.00680563665333179","0.00699376426771026","14.3929023730761","14.3660465287652","00:07","26.397"],["2019 CZ2","20","2460274.270480226","2023-Nov-25 18:29","0.00706589479910421","0.00706550976410954","0.0070662798428436","5.83514495913657","5.7701591305394","< 00:01","24.53"],["2023 TX8","8","2460241.584388387","2023-Oct-24 02:02","0.00852283645564772","0.0085156971423681","0.00852997552951772","5.59614312622643","5.53999651755896","< 00:01","26.549"],["2023 SO11","15","2460243.113698389","2023-Oct-25 14:44","0.00854064529137336","0.00853910925566551","0.00854218127207882","2.50219316886273","2.37424050084056","< 00:01","26.72"],["2020 YO3","9","2460302.352793036","2023-Dec-23 20:28","0.00911709455407157","0.00132403734386734","0.075895114834546","16.6243524587245","16.6067634660463","5_03:44","24.66"],["2023 TP16","3","2460240.762721365","2023-Oct-23 06:18","0.00969469428225585","0.00967545408065377","0.00971391505649066","1.49960852117434","1.3035136632222","00:04","29.727"],["2023 TG14","5","2460243.543780852","2023-Oct-26 01:03","0.0106248796317669","0.0106102262390001","0.0106395325731876","6.70925348477667","6.67177094848929","< 00:01","25.799"],["2023 UR6","1","2460242.886555086","2023-Oct-25 09:17","0.0123819563470614","0.0123080515006637","0.0124558600959207","18.391075026708","18.3793704909698","< 00:01","26.446"],["2023 TV4","11","2460240.826806870","2023-Oct-23 07:51","0.012962192990924","0.0129416443387879","0.0129827405658279","5.00216690288814","4.96090296287814","< 00:01","25.591"],["2013 VX4","16","2460283.192364517","2023-Dec-04 16:37","0.0130857104361301","0.0130856375164648","0.0130857833562513","6.57744386378682","6.54641373792769","< 00:01","23.87"],["2016 DK1","23","2460267.757403692","2023-Nov-19 06:11","0.013520322656194","0.0130085488473341","0.0523087111570708","6.75130462546159","6.72205101169514","9_17:29","27.40"],["2023 UU4","1","2460240.964283221","2023-Oct-23 11:09","0.0137991524963148","0.0137201622561293","0.0138781414094385","16.0791241180578","16.0671108871973","< 00:01","25.808"],["2023 UO","3","2460263.519967030","2023-Nov-15 00:29","0.0164597149220694","0.0164017453123115","0.0165176824541162","6.80211397079566","6.77827388192961","00:25","24.955"],["2023 UG4","3","2460254.613172983","2023-Nov-06 02:43","0.0167256924246329","0.0166830763425137","0.0167683038590762","3.52237057707367","3.47684991485978","00:08","26.539"],["2023 UO3","3","2460241.968135463","2023-Oct-24 11:14","0.0173640729403553","0.0173084399521737","0.0174197045325502","8.85816739461687","8.84082767211989","< 00:01","25.793"],["2023 UH5","5","2460242.348649827","2023-Oct-24 20:22","0.0184744171399763","0.0184403656813042","0.0185084682608066","10.3139196633522","10.299926607291","< 00:01","25.166"],["2023 UF6","4","2460242.644789712","2023-Oct-25 03:28","0.0205922207586221","0.020508660836812","0.0206757799351976","15.3424203237983","15.333984359974","< 00:01","25.861"],["2022 VR1","9","2460268.256447337","2023-Nov-19 18:09","0.0207641333939001","0.0207521487037892","0.0207761205590324","6.07837423010227","6.05722632908812","< 00:01","24.81"],["2023 TL31","2","2460252.914625968","2023-Nov-04 09:57","0.0208343429961614","0.0207948948536167","0.0208737907493335","9.19204435342377","9.17812081936219","00:03","25.532"],["2023 RA4","23","2460242.279326174","2023-Oct-24 18:42","0.0215667053490827","0.0215592421175741","0.0215741684984531","3.92988628119445","3.89832198017366","< 00:01","24.40"],["2019 VL5","7","2460264.555681157","2023-Nov-16 01:20","0.0218585731546747","0.021858221111012","0.0218589252252403","8.22081531013188","8.20597414996065","< 00:01","25.82"],["2010 UE51","28","2460303.072351173","2023-Dec-24 13:44","0.0229331332331773","0.0229329794970348","0.0229332869694645","1.31211637111996","1.22036058594594","< 00:01","28.47"],["2019 UT6","21","2460272.823527878","2023-Nov-24 07:46","0.0231451675347639","0.0231448154860119","0.0231455195847671","13.2037959435427","13.1950743331569","< 00:01","22.0"],["2016 WY","15","2460250.957001267","2023-Nov-02 10:58","0.0232491077268776","0.0191874623810891","0.0273651732292065","3.94084327854039","3.91165366894709","1_01:57","29.2"],["2023 TD14","3","2460256.843464597","2023-Nov-08 08:15","0.0238405972174618","0.0236118360539702","0.0240693324968259","6.28184794732661","6.26403137660122","00:19","25.883"],["2020 HX3","6","2460288.895155186","2023-Dec-10 09:29","0.0251566718804965","0.0155111011411132","0.0353178075203471","15.7293483560703","15.72261329668","09:47","27.2"],["2019 UH7","6","2460252.519946892","2023-Nov-04 00:29","0.0254556561217276","0.0254541223887334","0.025457189866033","5.93807582455984","5.92042242450282","< 00:01","27.46"]]}';

      jsondata = JSON.parse(data);
      //console.log(jsondata);

      // we need to put it in a data format suitable for the graph

      // x and y axes could be distance / time?

      // from the CAD api data query,

      // for each body get distance (dist, 4) and time (jd, 2)

      // first lets see if we can extract the distance into an array/list

      // console.log(jsondata['data']);

      // function that takes 2 arrays and combines them into a JSON
      function convert_to_json(label1, arr1, label2, arr2) {
        const obj = [];
        for (var i = 0; i < arr1.length; i++) {
          json_object = {};
          json_object[label1] = arr1[i];
          json_object[label2] = arr2[i];
          obj.push(json_object);
        }
        return obj;
      }

      // get date from the data
      data_date = [];
      for (var i = 0; i < jsondata["data"].length; i++) {
        data_date.push(parseFloat((jsondata["data"][i][2] % 1) * 100)); // extra maths is just to get some feasible numbers
        console.log("data type ", typeof data_date[i]);
      }

      // get distance from the data
      data_distance = [];

      for (var i = 0; i < jsondata["data"].length; i++) {
        data_distance.push(parseFloat(jsondata["data"][i][4] * 10000));
      } // extra maths is just to get some feasible numbers

      // call the function to make it JSON so we can import
      data_json = convert_to_json("Date", data_date, "Distance", data_distance);

      console.log("json : ", data_json);

      // simple d3 scatter test

      var margin = { top: 30, right: 60, bottom: 1, left: 40 },
        width = 1860 - margin.left - margin.right,
        height = 1800 - margin.top - margin.bottom;

      // append the svg object to the body of the page
      var svg = d3
        .select("#my_dataviz")
        .append("svg")
        .attr("width", width + margin.left + margin.right)
        .attr("height", height + margin.top + margin.bottom)
        .append("g")
        .attr("transform", "translate(" + margin.left + "," + margin.top + ")");

      //Read the data
      dataset = data_json;
      //Create SVG element
      var x = d3.scaleLinear().domain([0, 300]).range([0, width]);
      svg.append("g").attr("transform", "translate(0," + height + ")");
      //  .call(d3.axisBottom(x));  remove axis

      // Add Y axis
      var y = d3.scaleLinear().domain([0, 300]).range([height, 0]);
      svg.append("g");
      // .call(d3.axisLeft(y)); remove axis

      // Add dots
      svg
        .append("g")
        .selectAll("dot")
        .data(dataset)
        .enter()
        .append("circle")
        .attr("cy", function (d) {
          return x(d.Date);
        })
        .attr("cx", function (d) {
          return y(d.Distance);
        })
        .attr("r", function (d) {
          return Math.floor(Math.random() * 11);
        }) //random size
        .style("fill", function (d) {
          return "#" + Math.floor(Math.random() * 16777215).toString(16);
        }); //random color
    </script>

    <!--<img
      class="dino"
      src="Images/DBG.png"
      alt="Dinosaurs Looking at an ball of fire in the sky"
    />-->

    <p class="dataart">
      THE DIFFERENCE BETWEEN ASTEROIDS, COMETS AND METEORITES.
    </p>
    <p class="dataart2">Comets: These are snowballs of gas and dust.</p>
    <p class="dataart2">
      Asteroids: These are left over rocks from planet formations.
    </p>
    <p class="dataart2">
      Meteorites: These are pieces of debris that fall through the Earth's
      atmosphere.
    </p>

    <main>
      <section id="title">
        <h2>
          "Space travel is life-enhancing, and anything that's life-enhancing is
          worth doing. It makes you want to live forever."
        </h2>
        <h3>- Ray Bradbury</h3>
      </section>
    </main>

    <script type="text/javascript" src="JS/dataart.js"></script>
  </body>
</html>
